<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminal | Haider Mobiles</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Plus+Jakarta+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root { --gold: #d4af37; --dark: #050505; --card: #0d0d0d; --border: #1a1a1a; --text: #e0e0e0; --green: #25d366; --neon: rgba(212, 175, 55, 0.3); }
        
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--dark); color: var(--text); margin: 0; }

        /* ü§ñ Jarvis Header */
        header { padding: 20px 5%; background: rgba(5, 5, 5, 0.9); backdrop-filter: blur(10px); border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
        .logo { font-family: 'Orbitron'; color: var(--gold); text-decoration: none; letter-spacing: 2px; font-weight: bold; }
        .back-link { color: #666; text-decoration: none; font-size: 0.7rem; font-family: 'Orbitron'; text-transform: uppercase; }

        .container { max-width: 1200px; margin: 40px auto; padding: 0 5%; display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }

        /* üîç Image Terminal with Zoom */
        .viewer-box { 
            background: #fff; border-radius: 24px; padding: 40px; 
            height: 500px; display: flex; align-items: center; justify-content: center; 
            border: 1px solid var(--border); overflow: hidden; position: relative;
        }
        .viewer-box img { 
            max-width: 90%; max-height: 90%; object-fit: contain; 
            transition: transform 0.5s cubic-bezier(0.165, 0.84, 0.44, 1); 
            cursor: zoom-in;
        }
        .viewer-box:hover img { transform: scale(1.3); }

        /* üìã Info Terminal */
        .info-panel h1 { font-family: 'Orbitron'; font-size: 2.2rem; color: #fff; margin: 10px 0; }
        .brand-link { color: var(--gold); text-decoration: none; font-family: 'Orbitron'; font-size: 0.8rem; border: 1px solid var(--gold); padding: 4px 12px; border-radius: 50px; transition: 0.3s; }
        .brand-link:hover { background: var(--gold); color: #000; }
        
        .price-box { font-family: 'Orbitron'; color: var(--gold); font-size: 2rem; margin: 25px 0; text-shadow: 0 0 10px var(--neon); }
        
        .specs-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 30px; }
        .spec-card { background: var(--card); border: 1px solid var(--border); padding: 15px; border-radius: 12px; }
        .spec-card small { color: #555; display: block; font-size: 10px; text-transform: uppercase; margin-bottom: 5px; }
        .spec-card span { font-weight: 600; font-size: 14px; }

        .action-btns { margin-top: 40px; }
        .wa-btn { 
            background: var(--green); color: #fff; text-decoration: none; padding: 20px; 
            border-radius: 15px; display: flex; align-items: center; justify-content: center; 
            gap: 12px; font-family: 'Orbitron'; font-weight: bold; font-size: 1rem; transition: 0.3s;
        }
        .wa-btn:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(37, 211, 102, 0.2); }

        /* üí¨ Feedback Loop (Comment Section) */
        .feedback-section { grid-column: 1 / -1; margin-top: 60px; border-top: 1px solid var(--border); padding-top: 40px; }
        .comment-box { background: var(--card); padding: 30px; border-radius: 20px; border: 1px solid var(--border); max-width: 800px; }
        .user-row { display: flex; gap: 15px; margin-bottom: 25px; align-items: flex-start; }
        .avatar { width: 45px; height: 45px; background: #1a1a1a; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--gold); border: 1px solid var(--border); }

        @media (max-width: 900px) { .container { grid-template-columns: 1fr; } .viewer-box { height: 350px; } }
        
        footer { text-align: center; padding: 40px; color: #333; font-family: 'Orbitron'; font-size: 10px; letter-spacing: 2px; }
    </style>
</head>
<body>

<header>
    <a href="index.html" class="logo">HAIDER TERMINAL</a>
    <a href="index.html" class="back-link">‚Üê EXIT_SYSTEM</a>
</header>

<div class="container" id="productBody">
    <p style="grid-column: 1/-1; text-align: center; font-family: 'Orbitron';">CONNECTING TO DATABASE...</p>
</div>

<div class="feedback-section container">
    <div class="comment-box">
        <h3 style="font-family: 'Orbitron'; font-size: 14px; color: var(--gold); margin-bottom: 30px;">SYSTEM_REVIEWS</h3>
        <div class="user-row">
            <div class="avatar"><i class="fa fa-user-astronaut"></i></div>
            <div>
                <strong style="font-size: 14px;">Zeeshan_MobileExpert</strong>
                <p style="color: #888; font-size: 13px; margin: 5px 0;">Original panel and amazing battery timing. Haider Mobiles never disappoints.</p>
            </div>
        </div>
        <div class="user-row">
            <div class="avatar"><i class="fa fa-user-check"></i></div>
            <div>
                <strong style="font-size: 14px;">Customer_Review_Bot</strong>
                <p style="color: #888; font-size: 13px; margin: 5px 0;">Clean unit, no scratches. Fast delivery via courier.</p>
            </div>
        </div>
    </div>
</div>

<footer>JARVIS PROTOCOL V2.1 // HAIDER MOBILES PK</footer>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCYzkMGDwWZGx_PlrNfjloYZ6PVQRne9wg",
        authDomain: "web-app-4f3a1.firebaseapp.com",
        projectId: "web-app-4f3a1",
        databaseURL: "https://web-app-4f3a1-default-rtdb.firebaseio.com",
        appId: "1:222099203820:web:778e204d2960181dfba7c9"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const params = new URLSearchParams(window.location.search);
    const productId = params.get('id');

    if (productId) {
        get(ref(db, `products/${productId}`)).then((snap) => {
            if (snap.exists()) {
                const p = snap.val();
                renderProduct(p);
            }
        });
    }

    function renderProduct(p) {
        const formattedPrice = new Intl.NumberFormat('en-PK').format(p.price);
        const waMsg = encodeURIComponent(`Assalam o Alaikum, I am interested in ${p.name}. Provide final price and details.`);
        
        document.getElementById('productBody').innerHTML = `
            <div class="viewer-box">
                <img src="${p.img}" onerror="this.src='faq/Gemini.png'">
            </div>
            <div class="info-panel">
                <a href="index.html?search=${p.brand}" class="brand-link">${p.brand || 'PREMIUM'}</a>
                <h1>${p.name}</h1>
                <div class="price-box">Rs ${formattedPrice}</div>
                
                <div class="specs-grid">
                    <div class="spec-card"><small>Condition</small><span>A+ Grade (Mint)</span></div>
                    <div class="spec-card"><small>Availability</small><span style="color:var(--green)">IN STOCK</span></div>
                    <div class="spec-card"><small>Warranty</small><span>Checking Warranty</span></div>
                    <div class="spec-card"><small>Category</small><span>${p.category}</span></div>
                </div>

                <p style="color:#777; font-size:0.9rem; line-height:1.8; margin-top:30px;">
                    ${p.description || 'This unit has been professionally inspected by our technical team. Original components guaranteed.'}
                </p>

                <div class="action-btns">
                    <a href="https://wa.me/923279518790?text=${waMsg}" class="wa-btn">
                        <i class="fab fa-whatsapp"></i> SECURE ACQUISITION
                    </a>
                </div>
            </div>
        `;
        document.title = p.name + " | Haider Terminal";
    }
</script>
</body>
</html>
