<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haider Store | Premium Tech Accessories</title>
    
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-apple-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Haider Store">
    <link rel="icon" type="image/png" href="YOUR_LOGO_URL_HERE">
    <link rel="apple-touch-icon" href="YOUR_LOGO_URL_HERE">
    
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <style>
        :root { 
            --primary: #005f6b; 
            --header-dark: #004040; /* Naya Dark Green color */
            --text-dark: #1a1a1a; 
            --white: #ffffff; 
            --accent: #ff4d4d;
            --footer-bg: #0d1117;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Jost', sans-serif; background-color: var(--white); color: var(--text-dark); overflow-x: hidden; }

        /* --- âœ¨ ANIMATIONS --- */
        .reveal { opacity: 0; transition: all 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .slide-left { transform: translateX(-80px); }
        .zoom-in { transform: scale(0.85); }
        .slide-right { transform: translateX(80px); }
        .active { opacity: 1; transform: translateX(0) scale(1); }

        /* --- HEADER (Updated Color) --- */
        header {
            background: var(--header-dark); /* Header background set to Dark Green */
            padding: 15px 5%; display: flex;
            justify-content: space-between; align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1); position: sticky; top: 0; z-index: 3000;
        }
        .logo { font-size: 24px; font-weight: 700; color: var(--white) !important; text-decoration: none; letter-spacing: 1px; }
        
        .nav-links { display: flex; list-style: none; gap: 25px; align-items: center; }
        .nav-link { text-decoration: none; color: var(--white) !important; font-weight: 500; font-size: 15px; cursor: pointer; transition: 0.3s; opacity: 0.9; }
        .nav-link:hover { color: var(--accent) !important; opacity: 1; }
        
        /* Icons in Header */
        header .fas { color: var(--white) !important; }

        /* MEGA MENU */
        .nav-item { position: static; }
        .mega-menu {
            position: absolute; top: 100%; left: 0; width: 100%; background: var(--white);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-top: 1px solid #eee;
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;
            padding: 30px 10%; opacity: 0; visibility: hidden; transition: 0.3s ease; z-index: 2500;
        }
        .nav-item:hover .mega-menu { opacity: 1; visibility: visible; }
        .menu-col h4 { font-size: 13px; margin-bottom: 12px; color: var(--primary); border-bottom: 1px solid #eee; padding-bottom: 5px; text-transform: uppercase; }
        .menu-col a { display: block; color: var(--text-dark); text-decoration: none; font-size: 14px; padding: 6px 0; cursor: pointer; transition: 0.2s; }
        .menu-col a:hover { color: var(--accent); padding-left: 5px; }

        /* --- SEARCH OVERLAY CSS --- */
        .search-overlay {
            position: fixed; top: -100%; left: 0; width: 100%; height: 110px;
            background: var(--white); z-index: 5000; display: flex; align-items: center;
            justify-content: center; transition: 0.4s ease-in-out; box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        .search-overlay.active { top: 0; }
        .search-container { width: 90%; max-width: 800px; display: flex; align-items: center; gap: 15px; }
        .search-container input { 
            width: 100%; padding: 12px 25px; border: 2px solid #f0f0f0; border-radius: 30px; 
            font-size: 16px; outline: none; font-family: 'Jost', sans-serif; transition: 0.3s;
        }
        .search-container input:focus { border-color: var(--primary); }

        /* MOBILE HAMBURGER */
        .menu-btn { display: none; font-size: 22px; cursor: pointer; color: var(--white) !important; }
        .mobile-drawer {
            position: fixed; top: 0; left: -280px; width: 280px; height: 100%;
            background: var(--white); z-index: 4000; transition: 0.4s ease;
            box-shadow: 10px 0 30px rgba(0,0,0,0.1); padding: 25px; overflow-y: auto;
        }
        .mobile-drawer.open { left: 0; }
        .drawer-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 3500; display: none; }
        .drawer-overlay.active { display: block; }
        .drawer-links { list-style: none; margin-top: 20px; }
        .drawer-links h4 { font-size: 12px; color: var(--primary); margin: 20px 0 10px; text-transform: uppercase; }
        .drawer-links a { text-decoration: none; color: var(--text-dark); font-weight: 500; display: block; padding: 10px 0; border-bottom: 1px solid #f5f5f5; cursor: pointer; }

        /* --- HERO & BRANDS --- */
        .hero-container { height: 480px; background: #f4f4f4; overflow: hidden; position: relative; }

        /* --- PRODUCT SECTIONS --- */
        .section-header { text-align: center; margin: 60px 0 30px; }
        .section-header h2 { font-size: 28px; font-weight: 600; text-transform: uppercase; color: #222; }
        .container { padding: 0 5% 40px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 25px; }
        .cat-banner { width: 100%; border-radius: 12px; margin-bottom: 30px; cursor: pointer; }

        .p-card { transition: 0.3s; text-align: center; padding: 15px; cursor: pointer; border: 1px solid transparent; }
        .p-card:hover { border: 1px solid #eee; box-shadow: 0 10px 20px rgba(0,0,0,0.05); transform: translateY(-5px); }
        .p-img-box { width: 100%; height: 240px; background: #f9f9f9; display: flex; align-items: center; justify-content: center; border-radius: 10px; overflow: hidden; margin-bottom: 15px; }
        .p-img-box img { max-width: 85%; max-height: 85%; object-fit: contain; }
        .price-box { font-size: 18px; font-weight: 700; color: var(--primary); margin-top: 10px; }

        /* --- FOOTER --- */
        footer { background: var(--footer-bg); color: #ffffff; padding: 80px 8% 20px; margin-top: 100px; border-top: 5px solid var(--primary); }
        .f-grid { display: grid; grid-template-columns: 1.5fr 1fr 1fr 1.2fr; gap: 40px; }
        .f-col h4 { font-size: 16px; font-weight: 600; margin-bottom: 25px; color: var(--primary); text-transform: uppercase; position: relative; }
        .f-col h4::after { content: ''; position: absolute; left: 0; bottom: -8px; width: 35px; height: 2px; background: var(--accent); }
        
        /* FIX: Footer Links Color */
        .f-col ul { list-style: none; }
        .f-col ul li { margin-bottom: 10px; }
        .f-col a { text-decoration: none; color: #ffffff; opacity: 0.8; transition: 0.3s; }
        .f-col a:hover { opacity: 1; color: var(--accent); }

        /* Social Media Icons Styling */
        .social-links { display: flex; gap: 15px; margin-top: 20px; }
        .social-links a { 
            color: #fff; background: rgba(255,255,255,0.1); 
            width: 35px; height: 35px; display: flex; align-items: center; 
            justify-content: center; border-radius: 50%; transition: 0.3s; 
        }
        .social-links a:hover { background: var(--primary); transform: translateY(-3px); }

        @media (max-width: 768px) {
            .hero-container { height: 250px; }
            .grid { grid-template-columns: repeat(2, 1fr); gap: 12px; }
            .nav-links { display: none; }
            .menu-btn { display: block; }
            .f-grid { grid-template-columns: 1fr; text-align: center; }
            .f-col h4::after { left: 50%; transform: translateX(-50%); }
            .social-links { justify-content: center; }
        }
    </style>
</head>
<body>

<div id="searchOverlay" class="search-overlay">
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Search for products (Press Enter)..." onkeyup="handleSearch(event)">
        <i class="fas fa-times" onclick="toggleSearch()" style="font-size: 22px; cursor: pointer;"></i>
    </div>
</div>

<div class="drawer-overlay" id="overlay" onclick="toggleMenu()"></div>
<div class="mobile-drawer" id="drawer">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <span class="logo" style="color:#000 !important; font-size:20px;">HAIDER</span>
        <i class="fas fa-times" onclick="toggleMenu()" style="font-size:22px; cursor:pointer; color:#000 !important;"></i>
    </div>
    <div class="drawer-links">
        <a href="index.html">Home</a>
        <a href="about.html">About Us</a>
        <a href="contact.html">Contact Us</a>
        
        <h4>Power</h4>
        <a onclick="setFilter('Data Cables')">Data Cables</a>
        <a onclick="setFilter('Fast Chargers')">Fast Chargers</a>
        <h4>Audio</h4>
        <a onclick="setFilter('Earbuds')">Earbuds</a>
        <a onclick="setFilter('Handfree')">Handfree</a>
        <a onclick="setFilter('Headphones')">Headphones</a>
        <h4>Life Style</h4>
        <a onclick="setFilter('Smart Watches')">Smart Watches</a>
        <a onclick="setFilter('Wireless MIC')">Wireless MIC</a>
        <a onclick="setFilter('ALL')" style="color:var(--accent); font-weight:bold; margin-top:20px;">View All Shop</a>
    </div>
</div>

<header>
    <div style="display:flex; align-items:center; gap:15px;">
        <i class="fas fa-bars menu-btn" onclick="toggleMenu()"></i>
        <a href="index.html" class="logo">HAIDER STORE</a>
    </div>
    <nav>
        <ul class="nav-links">
            <li><a href="index.html" class="nav-link">Home</a></li>
            
            <li class="nav-item">
                <span class="nav-link">Categories <i class="fas fa-chevron-down" style="font-size: 9px;"></i></span>
                <div class="mega-menu">
                    <div class="menu-col">
                        <h4>Power</h4>
                        <a onclick="setFilter('Data Cables')">Data Cables</a>
                        <a onclick="setFilter('Fast Chargers')">Fast Chargers</a>
                    </div>
                    <div class="menu-col">
                        <h4>Audio</h4>
                        <a onclick="setFilter('Earbuds')">Earbuds</a>
                        <a onclick="setFilter('Handfree')">Handfree</a>
                        <a onclick="setFilter('Headphones')">Headphones</a>
                    </div>
                    <div class="menu-col">
                        <h4>Life Style</h4>
                        <a onclick="setFilter('Smart Watches')">Smart Watches</a>
                        <a onclick="setFilter('Wireless MIC')">Wireless MIC</a>
                    </div>
                    <div class="menu-col">
                        <h4>Shop</h4>
                        <a onclick="setFilter('ALL')" style="font-weight:bold; color:var(--accent);">View All</a>
                    </div>
                </div>
            </li>

            <li><a href="about.html" class="nav-link">About</a></li>
            <li><a href="contact.html" class="nav-link">Contact</a></li>
        </ul>
    </nav>
    <div style="display: flex; gap: 20px; font-size: 18px; cursor: pointer;">
        <i class="fas fa-search" onclick="toggleSearch()"></i>
        <i class="fas fa-shopping-bag"></i>
    </div>
</header>

<section class="hero-container">
    <img src="https://via.placeholder.com/1920x600" id="syncBanner" style="width: 100%; height: 100%; object-fit: cover;">
</section>
    
<div id="mainContent">
    <div id="earbudsSec" class="cat-sec-wrap">
        <div class="section-header reveal slide-left"><h2>Wireless Earbuds</h2></div>
        <div class="container reveal slide-left">
            <img src="https://via.placeholder.com/1400x400" id="earBannerSync" class="cat-banner">
            <div id="earbudsGrid" class="grid"></div>
        </div>
    </div>

    <div id="handfreeSec" class="cat-sec-wrap">
        <div class="section-header reveal zoom-in"><h2>Premium Handfree</h2></div>
        <div class="container reveal zoom-in">
            <img src="https://via.placeholder.com/1400x400" id="handfreeBannerSync" class="cat-banner">
            <div id="handfreeGrid" class="grid"></div>
        </div>
    </div>

    <div id="chargerSec" class="cat-sec-wrap">
        <div class="section-header reveal slide-right"><h2>Fast Chargers</h2></div>
        <div class="container reveal slide-right">
            <img src="https://via.placeholder.com/1400x400" id="chargerBannerSync" class="cat-banner">
            <div id="chargerGrid" class="grid"></div>
        </div>
    </div>

    <div id="accessoriesSec">
        <div class="section-header reveal zoom-in"><h2 id="accTitle">More Accessories</h2></div>
        <div class="container reveal zoom-in">
            <div id="accessoriesGrid" class="grid"></div>
        </div>
    </div>
</div>

<footer>
    <div class="f-grid">
        <div class="f-col">
            <h4 style="color: #fff; border:none;">HAIDER STORE</h4>
            <p>Premium Tech Accessories in Pakistan.</p>
            <div class="social-links">
                <a href="https://www.facebook.com/HaiderStudio.co" target="_blank"><i class="fab fa-facebook-f"></i></a>
                <a href="https://www.instagram.com/h.m4213803/" target="_blank"><i class="fab fa-instagram"></i></a>
                <a href="https://www.youtube.com/@HaiderStore-0066" target="_blank"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
        <div class="f-col">
            <h4>Shop</h4>
            <ul>
                <li><a onclick="setFilter('Earbuds')">Earbuds</a></li>
                <li><a onclick="setFilter('Handfree')">Handfree</a></li>
                <li><a onclick="setFilter('Smart Watches')">Smart Watches</a></li>
            </ul>
        </div>
        <div class="f-col">
            <h4>Support</h4>
            <ul>
                <li><a href="shipping.html">Shipping Policy</a></li>
                <li><a href="return.html">Return Policy</a></li>
            </ul>
        </div>
        <div class="f-col">
            <h4>Contact</h4>
            <p>+92 327 9518790</p>
            <p>info@haiderstore.com</p>
        </div>
    </div>
    <div style="text-align:center; padding-top:40px; font-size:13px; color:#636e72; border-top:1px solid #1a1f26; margin-top:40px;">
        &copy; 2026 <b>Haider Store</b>. Designed for Rashid Sahab.
    </div>
</footer>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCYzkMGDwWZGx_PlrNfjloYZ6PVQRne9wg",
        authDomain: "web-app-4f3a1.firebaseapp.com",
        projectId: "web-app-4f3a1",
        databaseURL: "https://web-app-4f3a1-default-rtdb.firebaseio.com",
        appId: "1:222099203820:web:778e204d2960181dfba7c9"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // --- UTILITIES ---
    window.toggleMenu = () => {
        document.getElementById('drawer').classList.toggle('open');
        document.getElementById('overlay').classList.toggle('active');
    };

    window.toggleSearch = () => {
        const overlay = document.getElementById('searchOverlay');
        overlay.classList.toggle('active');
        if(overlay.classList.contains('active')) {
            setTimeout(() => document.getElementById('searchInput').focus(), 300);
        }
    };

    function reveal() {
        document.querySelectorAll(".reveal").forEach(r => {
            if (r.getBoundingClientRect().top < window.innerHeight - 80) r.classList.add("active");
        });
    }
    window.addEventListener("scroll", reveal);

    // --- BANNERS SYNC ---
    onValue(ref(db, 'settings/heroBanner'), s => { if(s.exists()) document.getElementById('syncBanner').src = s.val(); });
    onValue(ref(db, 'settings/earbudsBanner'), s => { if(s.exists()) document.getElementById('earBannerSync').src = s.val(); });
    onValue(ref(db, 'settings/handfreeBanner'), s => { if(s.exists()) document.getElementById('handfreeBannerSync').src = s.val(); });
    onValue(ref(db, 'settings/chargerBanner'), s => { if(s.exists()) document.getElementById('chargerBannerSync').src = s.val(); });

    // --- PRODUCT FETCHING & FILTERING ---
    let allProducts = [];
    onValue(ref(db, 'products'), snap => {
        if (snap.exists()) {
            allProducts = Object.keys(snap.val()).map(id => ({ id, ...snap.val()[id] })).reverse();
            renderProducts(allProducts);
        }
    });

    function renderProducts(data) {
        const grids = { 'Earbuds': 'earbudsGrid', 'Handfree': 'handfreeGrid', 'Fast Chargers': 'chargerGrid' };
        Object.values(grids).forEach(id => {
            const el = document.getElementById(id);
            if(el) el.innerHTML = '';
        });
        document.getElementById('accessoriesGrid').innerHTML = '';

        data.forEach(p => {
            const card = `<div class="p-card" onclick="location.href='product.html?id=${p.id}'"><div class="p-img-box"><img src="${p.img}"></div><h3 style="font-size:15px; margin: 8px 0; font-weight:500;">${p.name}</h3><div class="price-box">Rs.${Number(p.price).toLocaleString()}</div></div>`;
            const gridId = grids[p.category] || 'accessoriesGrid';
            if(document.getElementById(gridId)) document.getElementById(gridId).innerHTML += card;
        });
        setTimeout(reveal, 500);
    }

    window.setFilter = (c) => {
        if(c === 'ALL') { location.reload(); }
        else {
            document.querySelectorAll('.cat-sec-wrap').forEach(s => s.style.display = 'none');
            const acc = document.getElementById('accessoriesSec');
            acc.style.display = 'block';
            document.getElementById('accTitle').innerText = c;
            const fil = allProducts.filter(p => p.category === c);
            const grid = document.getElementById('accessoriesGrid');
            grid.innerHTML = fil.length ? '' : '<p style="text-align:center; padding:50px;">No products found.</p>';
            fil.forEach(p => { 
                grid.innerHTML += `<div class="p-card" onclick="location.href='product.html?id=${p.id}'"><div class="p-img-box"><img src="${p.img}"></div><h3 style="font-size:15px; margin: 8px 0;">${p.name}</h3><div class="price-box">Rs.${Number(p.price).toLocaleString()}</div></div>`; 
            });
        }
        if(window.innerWidth < 768) {
            const dr = document.getElementById('drawer');
            if(dr.classList.contains('open')) toggleMenu();
        }
        window.scrollTo({ top: 400, behavior: 'smooth' });
    };

    // --- SEARCH FUNCTIONALITY ---
    window.handleSearch = (event) => {
        if (event.key === "Enter") {
            const query = event.target.value.toLowerCase().trim();
            if(!query) return;
            const filtered = allProducts.filter(p => 
                p.name.toLowerCase().includes(query) || 
                (p.category && p.category.toLowerCase().includes(query))
            );
            document.querySelectorAll('.cat-sec-wrap').forEach(s => s.style.display = 'none');
            document.getElementById('accessoriesSec').style.display = 'block';
            document.getElementById('accTitle').innerText = "Search: " + query;
            const grid = document.getElementById('accessoriesGrid');
            grid.innerHTML = filtered.length ? '' : '<p style="text-align:center; padding:50px;">No products found for "' + query + '".</p>';
            filtered.forEach(p => {
                grid.innerHTML += `<div class="p-card" onclick="location.href='product.html?id=${p.id}'"><div class="p-img-box"><img src="${p.img}"></div><h3 style="font-size:15px; margin: 8px 0;">${p.name}</h3><div class="price-box">Rs.${Number(p.price).toLocaleString()}</div></div>`;
            });
            toggleSearch(); 
            window.scrollTo({ top: 400, behavior: 'smooth' });
        }
    };
</script>
</body>
</html>
